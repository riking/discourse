{{#discovery-topics-list model=this.model refresh=(action "refresh") incomingCount=this.topicTrackingState.incomingCount as |discoveryTopicList|}}
  {{#if this.top}}
    <div class="top-lists">
      {{period-chooser period=this.period action=(action "changePeriod") fullDay=false}}
    </div>
  {{else}}
    {{#if this.topicTrackingState.hasIncoming}}
      <a href {{action "showInserted"}} class="alert alert-info clickable">
        {{count-i18n key="topic_count_" suffix=this.topicTrackingState.filter count=this.topicTrackingState.incomingCount}}
      </a>
    {{/if}}
  {{/if}}

  {{#if this.hasTopics}}
    {{topic-list
      highlightLastVisited=true
      showPosters=true
      hideCategory=this.model.hideCategory
      order=this.order
      ascending=this.ascending
      topics=this.model.topics
      expandGloballyPinned=this.expandGloballyPinned
      expandAllPinned=this.expandAllPinned
      scrollOnLoad=true
      onScroll=discoveryTopicList.saveScrollPosition
      category=this.category}}
  {{/if}}
{{/discovery-topics-list}}

<footer class="topic-list-bottom">
  {{conditional-loading-spinner condition=this.model.loadingMore}}
  {{#if this.allLoaded}}
    {{#if this.showDismissRead}}
      {{d-button
        class="btn-default dismiss-read"
        id="dismiss-topics"
        action=(action "dismissReadPosts")
        title="topics.bulk.dismiss_tooltip"
        label="topics.bulk.dismiss_button"}}
    {{/if}}
    {{#if this.showResetNew}}
      {{d-button
        class="btn-default dismiss-read"
        id="dismiss-new"
        action=(action "resetNew")
        icon="check"
        label="topics.bulk.dismiss_new"}}
    {{/if}}

    {{#footer-message education=this.footerEducation message=this.footerMessage}}
      {{#if this.latest}}
        {{#if this.canCreateTopicOnCategory}}<a href {{action "createTopic"}}>{{i18n "topic.suggest_create_topic"}}</a>{{/if}}
      {{else if this.top}}
        {{#link-to "discovery.categories"}}{{i18n "topic.browse_all_categories"}}{{/link-to}}, {{#link-to "discovery.latest"}}{{i18n "topic.view_latest_topics"}}{{/link-to}} {{i18n "or"}} {{i18n "filters.top.other_periods"}}
        {{top-period-buttons period=this.period action=(action "changePeriod")}}
      {{else}}
        {{#link-to "discovery.categories"}} {{i18n "topic.browse_all_categories"}}{{/link-to}} {{i18n "or"}} {{#link-to "discovery.latest"}}{{i18n "topic.view_latest_topics"}}{{/link-to}}
      {{/if}}
    {{/footer-message}}
  {{/if}}
</footer>
